<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-KJYNKJ5G1Q"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-KJYNKJ5G1Q");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MoviesFlix - Stream & Download</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary-color: #e50914; /* Netflix red */
        --prime-blue: #00a8e1; /* Prime Video blue */
        --hulu-green: #1ce783; /* Hulu green */
        --disney-purple: #6e2bff; /* Disney+ purple */
        --dark-bg: #0c111b;
        --gray-bg: #192133;
        --card-bg: #192133;
        --card-hover: #222b45;
        --gray-text: #a0a5b1;
        --light-text: #f9fafb;
        --success: #1ce783;
        --warning: #f5c518;
        --gradient-1: linear-gradient(135deg, #0f172a, #1e293b);
        --gradient-2: linear-gradient(135deg, #e50914, #b20710);
        --gradient-3: linear-gradient(135deg, #00a8e1, #006d9e);
        --gradient-4: linear-gradient(135deg, #1ce783, #0d9d5d);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: var(--gradient-1);
        color: var(--light-text);
        line-height: 1.6;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Header Styles */
      .navbar {
        display: flex;
        flex-direction: column;
        background: rgba(12, 17, 27, 0.95);
        backdrop-filter: blur(10px);
        padding: 1rem 2rem;
        gap: 1rem;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        border-bottom: 1px solid rgba(229, 9, 20, 0.3);
      }

      .navbar-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1.5rem;
      }

      .logo {
        font-size: 1.8rem;
        font-weight: 800;
        color: var(--primary-color);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        text-shadow: 0 0 10px rgba(229, 9, 20, 0.7);
      }

      .logo i {
        font-size: 1.5rem;
      }

      .search-container {
        flex: 1;
        min-width: 200px;
        max-width: 600px;
        position: relative;
      }

      .search-bar {
        width: 100%;
        padding: 0.8rem 1.2rem;
        padding-left: 3rem;
        border-radius: 50px;
        border: 1px solid #374151;
        background-color: rgba(12, 17, 27, 0.8);
        color: white;
        font-size: 1rem;
        transition: all 0.3s;
      }

      .search-bar:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.3);
      }

      .search-icon {
        position: absolute;
        left: 1.2rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--gray-text);
      }

      .user-actions {
        display: flex;
        gap: 1rem;
        align-items: center;
      }

      .btn {
        padding: 0.6rem 1.2rem;
        border-radius: 8px;
        border: none;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-primary {
        background: var(--primary-color);
        color: white;
      }

      .btn-primary:hover {
        background: #b20710;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(229, 9, 20, 0.4);
      }

      .btn-outline {
        background: transparent;
        border: 1px solid var(--primary-color);
        color: var(--primary-color);
      }

      .btn-outline:hover {
        background: rgba(229, 9, 20, 0.1);
        transform: translateY(-2px);
      }

      /* Filter Styles */
      .filters {
        display: flex;
        flex-wrap: wrap;
        gap: 0.8rem;
        margin-top: 0.5rem;
        justify-content: center;
      }

      .filter-btn {
        padding: 0.5rem 1.2rem;
        border-radius: 50px;
        background-color: rgba(55, 65, 81, 0.7);
        color: var(--light-text);
        border: 1px solid #374151;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .filter-btn.active {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
        box-shadow: 0 0 10px rgba(229, 9, 20, 0.5);
      }

      .filter-btn:hover {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
        transform: translateY(-2px);
      }

      /* Hero Section */
      .hero {
        position: relative;
        height: 70vh;
        min-height: 500px;
        overflow: hidden;
        margin-bottom: 3rem;
        display: flex;
        align-items: flex-end;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          to top,
          rgba(12, 17, 27, 0.9) 0%,
          rgba(12, 17, 27, 0.4) 50%,
          transparent 100%
        );
        z-index: 1;
      }

      .hero-backdrop {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: blur(5px);
        opacity: 0.7;
        z-index: 0;
      }

      .hero-content {
        position: relative;
        z-index: 2;
        padding: 2rem;
        max-width: 600px;
        margin-bottom: 4rem;
      }

      .hero-logo {
        width: 300px;
        margin-bottom: 1.5rem;
        filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.8));
      }

      .hero-title {
        font-size: 3rem;
        font-weight: 800;
        margin-bottom: 1rem;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
      }

      .hero-desc {
        font-size: 1.1rem;
        margin-bottom: 1.5rem;
        color: var(--light-text);
        line-height: 1.5;
        max-width: 500px;
      }

      .hero-buttons {
        display: flex;
        gap: 1rem;
      }

      .hero-btn {
        padding: 0.8rem 1.8rem;
        border-radius: 4px;
        font-weight: 700;
        font-size: 1.1rem;
        display: flex;
        align-items: center;
        gap: 0.8rem;
        cursor: pointer;
        transition: all 0.2s;
      }

      .btn-play {
        background: white;
        color: black;
      }

      .btn-play:hover {
        background: rgba(255, 255, 255, 0.8);
        transform: scale(1.05);
      }

      .btn-info {
        background: rgba(109, 109, 110, 0.7);
        color: white;
      }

      .btn-info:hover {
        background: rgba(109, 109, 110, 0.5);
        transform: scale(1.05);
      }

      /* Platform Navigation */
      .platform-nav {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin: 2rem 0;
        padding: 0 1.5rem;
        flex-wrap: wrap;
      }

      .platform-btn {
        background: transparent;
        border: none;
        color: var(--gray-text);
        font-size: 1.2rem;
        font-weight: 600;
        padding: 0.5rem 1rem;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
        display: flex;
        align-items: center;
        gap: 0.8rem;
      }

      .platform-btn.active {
        color: white;
      }

      .platform-btn::after {
        content: "";
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 0;
        height: 3px;
        background: var(--primary-color);
        transition: width 0.3s;
      }

      .platform-btn.active::after,
      .platform-btn:hover::after {
        width: 100%;
      }

      .platform-btn.netflix:hover {
        color: var(--primary-color);
      }
      .platform-btn.netflix.active::after,
      .platform-btn.netflix:hover::after {
        background: var(--primary-color);
      }

      .platform-btn.prime:hover {
        color: var(--prime-blue);
      }
      .platform-btn.prime.active::after,
      .platform-btn.prime:hover::after {
        background: var(--prime-blue);
      }

      .platform-btn.hulu:hover {
        color: var(--hulu-green);
      }
      .platform-btn.hulu.active::after,
      .platform-btn.hulu:hover::after {
        background: var(--hulu-green);
      }

      .platform-btn.disney:hover {
        color: var(--disney-purple);
      }
      .platform-btn.disney.active::after,
      .platform-btn.disney:hover::after {
        background: var(--disney-purple);
      }

      /* Main Content */
      .movie-section {
        max-width: 1400px;
        margin: 2rem auto;
        padding: 0 1.5rem;
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
      }

      .section-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: white;
        display: flex;
        align-items: center;
        gap: 0.8rem;
        position: relative;
        padding-left: 1.2rem;
      }

      .section-title::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        background: var(--primary-color);
        border-radius: 2px;
      }

      .sort-options {
        background: var(--gray-bg);
        padding: 0.5rem 1rem;
        border-radius: 8px;
        border: 1px solid #374151;
        color: var(--light-text);
        cursor: pointer;
      }

      .movie-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 1.8rem;
      }

      /* Movie Card Styles */
      .movie-card {
        background-color: var(--card-bg);
        border-radius: 12px;
        overflow: hidden;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        height: 100%;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        position: relative;
        transform-origin: center bottom;
      }

      .movie-card:hover {
        transform: translateY(-8px) scale(1.03);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.5);
        background-color: var(--card-hover);
        z-index: 10;
      }

      .movie-poster {
        width: 100%;
        height: 300px;
        object-fit: cover;
        display: block;
        background: linear-gradient(45deg, #1a202c, #2d3748);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--gray-text);
        position: relative;
        overflow: hidden;
      }

      .movie-poster::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 40%;
        background: linear-gradient(
          to top,
          rgba(25, 33, 51, 0.9) 0%,
          transparent 100%
        );
      }

      .movie-badge {
        position: absolute;
        top: 12px;
        right: 12px;
        background: var(--primary-color);
        color: white;
        padding: 0.3rem 0.7rem;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: 600;
        z-index: 2;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }

      .movie-content {
        padding: 1.2rem;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
      }

      .movie-title {
        font-size: 1.1rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: white;
        display: -webkit-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .movie-desc {
        font-size: 0.9rem;
        color: var(--gray-text);
        margin-bottom: 1rem;
        flex-grow: 1;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .movie-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.85rem;
        color: var(--gray-text);
        margin-bottom: 0.5rem;
      }

      .rating {
        display: flex;
        align-items: center;
        gap: 0.3rem;
        color: var(--warning);
        font-weight: 600;
      }

      .movie-actions {
        display: flex;
        gap: 0.8rem;
        margin-top: 1rem;
      }

      .action-btn {
        flex: 1;
        padding: 0.5rem;
        border-radius: 6px;
        background: rgba(55, 65, 81, 0.7);
        color: white;
        border: none;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.85rem;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.3rem;
      }

      .action-btn:hover {
        background: var(--primary-color);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      .download-btn {
        background: var(--success);
        color: #0c111b;
        font-weight: 600;
      }

      .download-btn:hover {
        background: #0da271;
        transform: translateY(-2px);
      }

      /* Platform Badges */
      .platform-badges {
        position: absolute;
        bottom: 10px;
        left: 10px;
        display: flex;
        gap: 5px;
        z-index: 2;
      }

      .platform-badge {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      }

      .badge-netflix {
        background: var(--primary-color);
      }

      .badge-prime {
        background: var(--prime-blue);
      }

      .badge-hulu {
        background: var(--hulu-green);
        color: #0c111b;
      }

      .badge-disney {
        background: var(--disney-purple);
      }

      /* Pagination Styles */
      .pagination {
        display: flex;
        justify-content: center;
        gap: 0.6rem;
        margin-top: 3rem;
        flex-wrap: wrap;
      }

      .pagination button {
        padding: 0.6rem 1.1rem;
        background-color: #374151;
        border: none;
        border-radius: 8px;
        color: white;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .pagination button.active {
        background-color: var(--primary-color);
        box-shadow: 0 0 10px rgba(229, 9, 20, 0.5);
      }

      .pagination button:hover:not(.active) {
        background-color: #4b5563;
        transform: translateY(-2px);
      }

      /* Loading State */
      .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 3rem;
        grid-column: 1 / -1;
        flex-direction: column;
      }

      .spinner {
        width: 50px;
        height: 50px;
        border: 5px solid rgba(229, 9, 20, 0.3);
        border-radius: 50%;
        border-top-color: var(--primary-color);
        animation: spin 1s ease-in-out infinite;
        margin-bottom: 1rem;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Footer Styles */
      .footer {
        background: var(--gray-bg);
        padding: 3rem 2rem;
        margin-top: 4rem;
        border-top: 1px solid rgba(229, 9, 20, 0.2);
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
      }

      .footer-column h3 {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        color: white;
        position: relative;
        padding-bottom: 0.5rem;
      }

      .footer-column h3::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 40px;
        height: 2px;
        background: var(--primary-color);
      }

      .footer-links {
        list-style: none;
      }

      .footer-links li {
        margin-bottom: 0.8rem;
      }

      .footer-links a {
        color: var(--gray-text);
        text-decoration: none;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .footer-links a:hover {
        color: white;
        transform: translateX(3px);
      }

      .social-links {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
      }

      .social-links a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        transition: all 0.2s;
      }

      .social-links a:hover {
        background: var(--primary-color);
        transform: translateY(-3px);
      }

      .copyright {
        text-align: center;
        padding-top: 2rem;
        margin-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--gray-text);
        font-size: 0.9rem;
      }

      /* Responsive */
      @media (max-width: 992px) {
        .hero {
          height: 60vh;
        }

        .hero-title {
          font-size: 2.5rem;
        }
      }

      @media (max-width: 768px) {
        .navbar-top {
          flex-direction: column;
          align-items: stretch;
        }

        .logo {
          justify-content: center;
        }

        .user-actions {
          justify-content: center;
        }

        .movie-grid {
          grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
          gap: 1.2rem;
        }

        .hero {
          height: 50vh;
        }

        .hero-title {
          font-size: 2rem;
        }

        .hero-content {
          padding: 1rem;
          margin-bottom: 2rem;
        }

        .hero-buttons {
          flex-direction: column;
        }

        .platform-nav {
          gap: 1rem;
        }
      }

      @media (max-width: 480px) {
        .movie-grid {
          grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        }

        .movie-actions {
          flex-direction: column;
        }

        .hero {
          height: 40vh;
          min-height: 300px;
        }

        .hero-title {
          font-size: 1.5rem;
        }

        .hero-desc {
          font-size: 0.9rem;
        }

        .platform-nav {
          gap: 0.5rem;
        }

        .platform-btn {
          font-size: 1rem;
          padding: 0.3rem 0.6rem;
        }
      }
    </style>
    <script
      type="text/javascript"
      src="//pl27094339.profitableratecpm.com/4f/8f/f9/4f8ff905a41c2232099bded39b8a2f0d.js"
    ></script>
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-top">
        <div class="logo">
          <i class="fas fa-film"></i>
          <span>MovieFlix.rent</span>
        </div>
        <script
          type="text/javascript"
          src="//www.highperformanceformat.com/0e828247f6746bb8922aab3dd36f5282/invoke.js"
        ></script>

        <a
          href="https://www.profitableratecpm.com/mxuf6yhw1?key=8b3a8975b0ba4277507334f940dafe55"
        ></a>
        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input
            type="text"
            class="search-bar"
            placeholder="Search movies..."
            id="searchInput"
          />
        </div>

        <div class="user-actions">
          <button class="btn btn-outline">
            <i class="fas fa-user"></i>
            Sign In
          </button>
          <button class="btn btn-primary">
            <i class="fas fa-crown"></i>
            Premium
          </button>
        </div>
      </div>

      <div class="filters" id="filters">
        <button class="filter-btn active" data-filter="all">
          <i class="fas fa-globe"></i>
          All
        </button>
        <button class="filter-btn" data-filter="Action">
          <i class="fas fa-explosion"></i>
          Action
        </button>
        <button class="filter-btn" data-filter="Drama">
          <i class="fas fa-theater-masks"></i>
          Drama
        </button>
        <button class="filter-btn" data-filter="Comedy">
          <i class="fas fa-laugh"></i>
          Comedy
        </button>
        <button class="filter-btn" data-filter="Sci-Fi">
          <i class="fas fa-rocket"></i>
          Sci-Fi
        </button>
        <button class="filter-btn" data-filter="Thriller">
          <i class="fas fa-mask"></i>
          Thriller
        </button>
      </div>
    </nav>

    <!-- Platform Navigation -->
    <div class="platform-nav">
      <button class="platform-btn netflix active">
        <i class="fab fa-netflix"></i>
        Netflix
      </button>
      <button class="platform-btn prime">
        <i class="fab fa-amazon"></i>
        Prime Video
      </button>
      <button class="platform-btn hulu">
        <i class="fas fa-play-circle"></i>
        Hulu
      </button>
      <button class="platform-btn disney">
        <i class="fas fa-crown"></i>
        Disney+
      </button>
    </div>

    <section class="movie-section">
      <div class="section-header">
        <h2 class="section-title">
          <i class="fas fa-fire"></i>
          Popular Movies
        </h2>
        <select class="sort-options" id="sortOptions">
          <option value="default">Sort by Default</option>
          <option value="rating">Sort by Rating</option>
          <option value="newest">Sort by Newest</option>
        </select>
      </div>

      <div class="movie-grid" id="movieGrid">
        <div class="loading">
          <div class="spinner"></div>
          <p>Loading movies...</p>
        </div>
      </div>

      <div class="pagination" id="pagination"></div>
    </section>
    <script type="text/javascript">
      atOptions = {
        key: "0e828247f6746bb8922aab3dd36f5282",
        format: "iframe",
        height: 300,
        width: 160,
        params: {},
      };
    </script>

    <footer class="footer">
      <div class="footer-content">
        <div class="footer-column">
          <h3>MovieHub</h3>
          <ul class="footer-links">
            <li>
              <a href="pages/Help-center.html"
                ><i class="fas fa-question-circle"></i> Help Center</a
              >
            </li>
            <li>
              <a href="pages/News.html"
                ><i class="fas fa-newspaper"></i> News</a
              >
            </li>
            <li></li>
            <li>
              <a href="pages/Feedback.html"
                ><i class="fas fa-comments"></i> Feedback</a
              >
            </li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Platforms</h3>
          <ul class="footer-links">
            <li>
              <a href="/"><i class="fab fa-netflix"></i> Netflix Originals</a>
            </li>
            <li>
              <a href="/"><i class="fab fa-amazon"></i> Prime Video</a>
            </li>
            <li>
              <a href="/"><i class="fas fa-play-circle"></i> Hulu Exclusives</a>
            </li>
            <li>
              <a href="/"><i class="fas fa-crown"></i> Disney+</a>
            </li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Legal</h3>
          <ul class="footer-links">
            <li>
              <a href=""><i class="fas fa-file-alt"></i> Terms of Use</a>
            </li>
            <li>
              <a href="#"><i class="fas fa-lock"></i> Privacy Policy</a>
            </li>
            <li>
              <a href="#"><i class="fas fa-cookie-bite"></i> Cookie Policy</a>
            </li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Connect</h3>
          <div class="social-links">
            <a href="/"><i class="fab fa-facebook-f"></i></a>
            <a href="/"><i class="fab fa-twitter"></i></a>
            <a href="/"><i class="fab fa-instagram"></i></a>
            <a href="/"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
      </div>

      <div class="copyright">
        <p>
          &copy; 2023 MovieFlix.rent. All rights reserved. Stream and download
          your favorite movies in high quality.
        </p>
      </div>
    </footer>

    <script>
      function slugify(title) {
        return String(title)
          .toLowerCase()
          .trim()
          .replace(/[^a-z0-9]+/g, "-")
          .replace(/^-+|-+$/g, "");
      }

      const API_URL =
        "https://imdb236.p.rapidapi.com/api/imdb/most-popular-movies";

      const API_OPTIONS = {
        method: "GET",
        headers: {
          "x-rapidapi-key":
            "bc6ccbe47cmshf58931fa02c5713p1c1166jsnf7e6f4c5e38c",
          "x-rapidapi-host": "imdb236.p.rapidapi.com",
        },
      };

      const itemsPerPage = 8;
      let currentPage = 1;
      let currentFilter = "all";
      let currentSort = "default";
      let allMovies = [];

      const movieGrid = document.getElementById("movieGrid");
      const pagination = document.getElementById("pagination");
      const searchInput = document.getElementById("searchInput");
      const filterButtons = document.querySelectorAll(".filter-btn");
      const sortOptions = document.getElementById("sortOptions");

      // Function to process movie data from API
      function processMovieData(movie) {
        const qualityOptions = ["HD", "4K", "FHD", "HDR"];
        const genreOptions = movie.genreList
          ? movie.genreList.map((g) => g.value)
          : ["Action", "Drama", "Comedy", "Sci-Fi"];
        const year = movie.year ? movie.year : "2023";

        // Random platforms for demonstration
        const platforms = ["netflix", "prime", "hulu", "disney"];
        const availablePlatforms = [];
        for (let i = 0; i < Math.floor(Math.random() * 3) + 1; i++) {
          const platform =
            platforms[Math.floor(Math.random() * platforms.length)];
          if (!availablePlatforms.includes(platform)) {
            availablePlatforms.push(platform);
          }
        }

        return {
          id: movie.id,
          title: movie.primaryTitle || movie.originalTitle || "Untitled",
          poster:
            movie.primaryImage ||
            "https://source.unsplash.com/random/300x450/?movie",
          genres: movie.genres || movie.interests || [],
          description: movie.description || "No description available.",
          releaseDate:
            movie.releaseDate?.split("-")[0] || movie.startYear || "Upcoming",
          rating:
            movie.averageRating?.toFixed(1) ||
            (Math.random() * 2 + 3).toFixed(1),
          quality:
            qualityOptions[Math.floor(Math.random() * qualityOptions.length)],
          duration: movie.runtimeMinutes
            ? `${Math.floor(movie.runtimeMinutes / 60)}h ${
                movie.runtimeMinutes % 60
              }m`
            : "2h 0m",
          trailer: movie.trailer || null,
          imdbUrl: movie.url || "#",
          platforms: availablePlatforms,
        };
      }

      // Function to fetch latest movies from API
      const CACHE_KEY = "imdbMoviesCache";
      const CACHE_TTL = 12 * 60 * 60 * 1000; // 12 hours in milliseconds

      async function fetchLatestMovies() {
        movieGrid.innerHTML = `
        <div class="loading">
          <div class="spinner"></div>
          <p>Loading movies from IMDb...</p>
        </div>
      `;

        try {
          // 1. Try to load from cache
          const cached = localStorage.getItem(CACHE_KEY);
          if (cached) {
            const { timestamp, data } = JSON.parse(cached);
            const age = Date.now() - timestamp;
            if (age < CACHE_TTL && Array.isArray(data)) {
              console.log("Using cached data, age:", age);
              allMovies = data.map(processMovieData);
              return displayMovies();
            } else {
              // stale cache, remove it
              localStorage.removeItem(CACHE_KEY);
            }
          }

          // 2. No valid cache â†’ fetch from API
          const response = await fetch(API_URL, API_OPTIONS);
          if (!response.ok) {
            throw new Error(`API error: ${response.status}`);
          }
          const data = await response.json();
          if (!Array.isArray(data)) {
            throw new Error("Invalid API response format");
          }

          // 3. Store fresh data in cache with timestamp
          localStorage.setItem(
            CACHE_KEY,
            JSON.stringify({
              timestamp: Date.now(),
              data,
            })
          );

          console.log("Fetched fresh data");
          allMovies = data.map(processMovieData);
          displayMovies();
        } catch (error) {
          console.error("Error fetching movies:", error);
          movieGrid.innerHTML = `
          <div style="grid-column:1/-1; text-align:center; padding:2rem; color:#ef4444">
            <i class="fas fa-exclamation-triangle" style="font-size:3rem; margin-bottom:1rem;"></i>
            <h3>Failed to load movies</h3>
            <p>${error.message || "Please try again later"}</p>
            <button class="btn btn-primary" style="margin-top:1rem;" onclick="fetchLatestMovies()">
              <i class="fas fa-sync-alt"></i>
              Retry
            </button>
          </div>
        `;
        }
      }

      // Function to display movies in the grid
      function displayMovies() {
        const searchText = searchInput.value.trim().toLowerCase();
        let filtered = allMovies.filter((m) => {
          const matchesSearch = m.title.toLowerCase().includes(searchText);

          // Check if the movie matches the current filter
          let matchesFilter = currentFilter === "all";
          if (!matchesFilter) {
            matchesFilter = m.genres.some((genre) => genre === currentFilter);
          }

          return matchesSearch && matchesFilter;
        });

        // Apply sorting
        if (currentSort === "rating") {
          filtered.sort((a, b) => parseFloat(b.rating) - parseFloat(a.rating));
        } else if (currentSort === "newest") {
          filtered.sort(
            (a, b) => parseInt(b.releaseDate) - parseInt(a.releaseDate)
          );
        }

        const start = (currentPage - 1) * itemsPerPage;
        const current = filtered.slice(start, start + itemsPerPage);

        movieGrid.innerHTML =
          current.length > 0
            ? current
                .map(
                  (m) =>
                    `
                  <div class="movie-card">
                    <div class="movie-badge">${m.quality}</div>
                    <div class="movie-poster">
                      ${
                        m.poster.includes("http")
                          ? `<img src="${m.poster}" alt="${m.title}" style="width:100%; height:100%; object-fit:cover;">`
                          : `<i class="fas fa-film" style="font-size:3rem;"></i>`
                      }
                      <div class="platform-badges">
                        ${m.platforms
                          .map(
                            (p) => `
                            <div class="platform-badge badge-${p}">
                              ${p === "netflix" ? "N" : ""}
                              ${p === "prime" ? "P" : ""}
                              ${p === "hulu" ? "H" : ""}
                              ${p === "disney" ? "D" : ""}
                            </div>`
                          )
                          .join("")}
                      </div>
                    </div>
                    <div class="movie-content">
                      <h3 class="movie-title">${m.title}</h3>
                      <p class="movie-desc">${m.description}</p>
                      <div class="movie-meta">
                        <span>${m.releaseDate}</span>
                        <span class="rating">
                          <i class="fas fa-star"></i>
                          ${m.rating}
                        </span>
                      </div>
                      <div class="movie-meta">
                        <span>${m.duration}</span>
                        <span>${m.genres.slice(0, 2).join(", ")}</span>
                      </div>
                      <div class="movie-actions">
                        <button class="action-btn">
                          <i class="fas fa-play"></i>
                          Trailer
                        </button>
                        <a href="Movies/${slugify(
                          m.title
                        )}.html"class="action-btn download-btn" style="text-decoration: none;">
                          <i class="fas fa-download"></i>
                          Download
                        </a>
                      </div>
                    </div>
                  </div>`
                )
                .join("")
            : `<div style="grid-column:1/-1; text-align:center; padding:2rem; color:var(--gray-text)">
              <i class="fas fa-film" style="font-size:3rem; margin-bottom:1rem;"></i>
              <h3>No movies found</h3>
              <p>Try changing your search or filter criteria</p>
            </div>`;

        displayPagination(filtered.length);
      }

      // Function to display pagination
      function displayPagination(totalItems) {
        const pageCount = Math.ceil(totalItems / itemsPerPage) || 1;
        pagination.innerHTML = "";

        // Previous button
        const prevBtn = document.createElement("button");
        prevBtn.innerHTML = `<i class="fas fa-chevron-left"></i>`;
        prevBtn.disabled = currentPage === 1;
        prevBtn.addEventListener("click", () => {
          if (currentPage > 1) {
            currentPage--;
            displayMovies();
          }
        });
        pagination.appendChild(prevBtn);

        // Page buttons
        for (let i = 1; i <= pageCount; i++) {
          const btn = document.createElement("button");
          btn.textContent = i;
          btn.classList.toggle("active", i === currentPage);
          btn.addEventListener("click", () => {
            currentPage = i;
            displayMovies();
          });
          pagination.appendChild(btn);
        }

        // Next button
        const nextBtn = document.createElement("button");
        nextBtn.innerHTML = `<i class="fas fa-chevron-right"></i>`;
        nextBtn.disabled = currentPage === pageCount;
        nextBtn.addEventListener("click", () => {
          if (currentPage < pageCount) {
            currentPage++;
            displayMovies();
          }
        });
        pagination.appendChild(nextBtn);
      }

      // Event listeners
      searchInput.addEventListener("input", () => {
        currentPage = 1;
        displayMovies();
      });

      filterButtons.forEach((btn) =>
        btn.addEventListener("click", () => {
          filterButtons.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          currentFilter = btn.dataset.filter;
          currentPage = 1;
          displayMovies();
        })
      );

      sortOptions.addEventListener("change", (e) => {
        currentSort = e.target.value;
        currentPage = 1;
        displayMovies();
      });

      // Platform navigation
      document.querySelectorAll(".platform-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          document
            .querySelectorAll(".platform-btn")
            .forEach((b) => b.classList.remove("active"));
          this.classList.add("active");
          // For demonstration, we're just changing the hero background
          if (this.classList.contains("netflix")) {
            document.querySelector(".hero").style.backgroundImage =
              "linear-gradient(to right, #e50914, #b20710)";
          } else if (this.classList.contains("prime")) {
            document.querySelector(".hero").style.backgroundImage =
              "linear-gradient(to right, #00a8e1, #006d9e)";
          } else if (this.classList.contains("hulu")) {
            document.querySelector(".hero").style.backgroundImage =
              "linear-gradient(to right, #1ce783, #0d9d5d)";
          } else if (this.classList.contains("disney")) {
            document.querySelector(".hero").style.backgroundImage =
              "linear-gradient(to right, #6e2bff, #4c1bc9)";
          }
        });
      });

      // Initialize the app
      fetchLatestMovies();
    </script>
    <script
      async="async"
      data-cfasync="false"
      src="//pl27094209.profitableratecpm.com/5f0fe2e0ad86538bbdddc0db3ac3f5a9/invoke.js"
    ></script>
    <div id="container-5f0fe2e0ad86538bbdddc0db3ac3f5a9"></div>
    <script
      type="text/javascript"
      src="//pl27094747.profitableratecpm.com/21/84/49/2184495f4d2be0d373f879cdcd0b6f23.js"
    ></script>
    <script
      async="async"
      data-cfasync="false"
      src="//pl27094209.profitableratecpm.com/5f0fe2e0ad86538bbdddc0db3ac3f5a9/invoke.js"
    ></script>
    <div id="container-5f0fe2e0ad86538bbdddc0db3ac3f5a9"></div>
  </body>
</html>
